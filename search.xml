<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>test2</title>
      <link href="/posts/51705/"/>
      <url>/posts/51705/</url>
      
        <content type="html"><![CDATA[<h3 id="RHEL-x2F-CentOS-7安装"><a href="#RHEL-x2F-CentOS-7安装" class="headerlink" title="RHEL&#x2F;CentOS 7安装"></a>RHEL&#x2F;CentOS 7安装</h3><p>从Zabbix 5.0版本开始，Zabbix前端需要PHP 7.2版或更高版本。</p><p>1.关闭防火墙和selinux</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line">sed -i &#x27;s/SELINUX=enforcing/SELINUX=disabled/&#x27; /etc/selinux/config</span><br><span class="line">reboot #重启</span><br></pre></td></tr></table></figure><p>2.安装zabbix rpm源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm</span><br><span class="line">sed -i &#x27;s#http://repo.zabbix.com#https://mirrors.aliyun.com/zabbix#&#x27; /etc/yum.repos.d/zabbix.repo</span><br><span class="line">yum clean all</span><br></pre></td></tr></table></figure><p>3.安装zabbix server </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install zabbix-server-mysql zabbix-agent -y</span><br></pre></td></tr></table></figure><p>4.安装 Software Collections</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install centos-release-scl -y</span><br></pre></td></tr></table></figure><p>5.启用 zabbix 前端源，修改<code>vi /etc/yum.repos.d/zabbix.repo</code>，将[zabbix-frontend]下的 enabled 改为 1</p><p>enabled&#x3D;1，过<code>yum</code>搜索<code>Zabbix</code>将返回<code>zabbix-web</code>包和四个新包。 这四个包是:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zabbix-nginx-conf-scl.noarch : Nginx的Zabbix前端配置 (scl 版本)</span><br><span class="line">zabbix-web-deps-scl.noarch : 用于从redhat软件集合安装zabbix-web包所需PHP依赖项的便利包</span><br><span class="line">zabbix-web-mysql-scl.noarch : 用于MySQL数据库的Zabbix web前端包 (scl 版本)</span><br><span class="line">zabbix-web-pgsql-scl.noarch : 用于PostgreSQL数据库的Zabbix web前端包(scl 版本)</span><br></pre></td></tr></table></figure><blockquote><p>在安装MySQL数据库所需的<code>zabbix-web-mysql-scl</code>或者 PostgreSQL数据库所需的<code>zabbix-web-pgsql-scl</code>. 取决于Web服务器的需要，也请安装<code>zabbix-apache-conf-scl</code> 或者 <code>zabbix-nginx-conf-scl</code></p></blockquote><p>6.安装 zabbix 前端和相关环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install zabbix-web-mysql-scl zabbix-apache-conf-scl -y</span><br></pre></td></tr></table></figure><p>7.安装mariadb数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb-server -y</span><br><span class="line">systemctl enable --now mariadb</span><br></pre></td></tr></table></figure><p>8.初始化数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation  # 设置密码</span><br><span class="line">mysql -u root -p （输入数据库root密码进入数据库）</span><br><span class="line">create database zabbix character set utf8 collate utf8_bin; #创建数据库</span><br><span class="line">create user zabbix@localhost identified by &#x27;password&#x27;; #创建用户</span><br><span class="line">grant all privileges on zabbix.* to zabbix@localhost; #授权</span><br><span class="line">flush privileges;</span><br><span class="line">quit;</span><br></pre></td></tr></table></figure><p>9.导入数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix</span><br></pre></td></tr></table></figure><p>10.修改配置文件zabbix_server.conf 里的数据库密码<code>vi /etc/zabbix/zabbix_server.conf</code></p><p>找到 DBPassword&#x3D;password ，将数据库密码改为zabbix数据库的密码，保存退出。</p><p>11.修改php时区，<code>vi /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf</code> 里的时区， 改成 Asia&#x2F;Shanghai</p><p>php_value[date.timezone] &#x3D; Asia&#x2F;Shanghai</p><blockquote><p>注意去掉前面的分号</p></blockquote><p>12.启动服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart zabbix-server zabbix-agent httpd rh-php72-php-fpm</span><br><span class="line">systemctl enable zabbix-server zabbix-agent httpd rh-php72-php-fpm</span><br></pre></td></tr></table></figure><h3 id="snmp测试"><a href="#snmp测试" class="headerlink" title="snmp测试"></a>snmp测试</h3><p><img src="https://image.jh2ing.com/image-20220310161437826.png" alt="image-20220310161437826"></p><p>配置交换机</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;H3C&gt;system-view </span><br><span class="line">[H3C]snmp-agent  </span><br><span class="line">[H3C]snmp-agent sys-info version v2c</span><br><span class="line">[H3C]snmp-agent community read public </span><br><span class="line">[H3C]snmp-agent trap enable</span><br></pre></td></tr></table></figure><p>测试</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">snmpwalk -v 2c -c public 192.168.73.100 system</span><br></pre></td></tr></table></figure><p><img src="https://image.jh2ing.com/image-20220310161548987.png" alt="image-20220310161548987"></p><blockquote><p>snmp安装 <code>yum -y install net-snmp net-snmp-utils</code></p></blockquote><p>zabbix监控</p><p>登录地址：<code>http://ip/zabbix/</code></p><blockquote><p>默认密码：Admin&#x2F;zabbix</p></blockquote><p>在配置选项选择主机创建主机</p><p><img src="https://image.jh2ing.com/image-20220320105806023.png" alt="image-20220320105806023"></p><p>在SNMP community一般使用宏来配置SNMP community值</p><p><img src="https://image.jh2ing.com/image-20220320110220092.png" alt="image-20220320110220092"></p><p>配置完成之后需要等待zabbix去检测，SNMP显示说明已经成功连接</p><p><img src="https://image.jh2ing.com/image-20220320110320622.png" alt="image-20220320110320622"></p><p>选择图形可自定义监控项</p><p><img src="https://image.jh2ing.com/image-20220320110451487.png" alt="image-20220320110451487"></p><p><img src="https://image.jh2ing.com/image-20220320121527949.png" alt="image-20220320121527949"></p><p>中文乱码解决</p><p>安装方式的不同，可能路径不太一样。</p><p>通过find命令找到自己的zabbix路径</p><p><img src="https://image.jh2ing.com/image-20220320124515110.png" alt="image-20220320124515110"></p><p>这里是<code>/usr/share/zabbix</code></p><p>查找defines.inc.php文件中的字体路径<code>vim /usr/share/zabbix/include/defines.inc.php</code></p><p><img src="https://image.jh2ing.com/image-20220320124820647.png" alt="image-20220320124820647"></p><p>从自己电脑的字体库中拷贝字体到此目录下</p><p><img src="https://image.jh2ing.com/image-20220320125031999.png" alt="image-20220320125031999"></p><p><img src="https://image.jh2ing.com/image-20220320124920425.png" alt="image-20220320124920425"></p><p>修改defines.inc.php文件并重新启动zabbix</p><p><img src="https://image.jh2ing.com/image-20220320125140415.png" alt="image-20220320125140415"></p><p><img src="https://image.jh2ing.com/image-20220320125222367.png" alt="image-20220320125222367"></p>]]></content>
      
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/posts/63534/"/>
      <url>/posts/63534/</url>
      
        <content type="html"><![CDATA[<h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/undefined/"/>
      <url>/posts/undefined/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
